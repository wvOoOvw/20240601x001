!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CanvasXML=t():e.CanvasXML=t()}(self,(()=>(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{yX:()=>T,q_:()=>ae,default:()=>ke});const o={number:(e,t)=>Number(e.toFixed(t)),random:(e,t,o)=>Number((Math.random()*e).toFixed(o))+t,range:(e,t,o)=>Math.min(Math.max(e,t),o)},n={drawImage:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t;if(0!==o.width&&0!==o.height){var c=o.width,s=o.height;e.drawImage(o,0,0,c,s,n,r,a,i)}},drawImageClipMinCenter:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t;if(0===o.width||0===o.height)return;var c=o.width,s=o.height;const h=a/c,l=i/s;h>l&&(n+=(a-a*l/h)/2,a-=a-a*l/h),l>h&&(r+=(i-i*h/l)/2,i-=i-i*h/l),e.drawImage(o,0,0,c,s,n,r,a,i)},drawImageClipMaxCenter:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t;if(0===o.width||0===o.height)return;var c=0,s=0,h=o.width,l=o.height;const u=a/h,d=i/l;u>d&&(s=l-l*d/u,l-=l-l*d/u),d>u&&(c=h-h*u/d,h-=h-h*u/d),e.drawImage(o,c,s,h,l,n,r,a,i)},drawArc:(e,t,o,n,r,a)=>{var{x:i,y:c,w:s,h}=t;e.beginPath(),e.arc(i,c,o,n,r,a)},drawRect:(e,t)=>{var{x:o,y:n,w:r,h:a}=t;e.beginPath(),e.moveTo(o,n),e.lineTo(o+r,n),e.lineTo(o+r,n+a),e.lineTo(o,n+a),e.closePath()},drawRectRadius:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t;const c=Array.isArray(o)?o:new Array(4).fill(o);e.beginPath(),e.moveTo(n,r+c[0]),e.arcTo(n,r,n+c[0],r,c[0]),e.lineTo(n+a-c[1],r),e.arcTo(n+a,r,n+a,r+c[1],c[1]),e.lineTo(n+a,r+i-c[2]),e.arcTo(n+a,r+i,n+a-c[2],r+i,c[2]),e.lineTo(n+c[3],r+i),e.arcTo(n,r+i,n,r+i-c[3],c[3]),e.closePath()},drawText:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t;e.fillText(o,n,r)},drawTextCaculateLine:(e,t,o)=>{var{x:n,y:r,w:a,h:i}=t,c="",s=[];return o.split("").forEach((t=>{const o=e.measureText(c+t).width;o>a&&s.push({text:c,w:o,h:Number(e.font.match(/\d+px/)[0].replace("px",""))}),o>a&&(c=""),c+=t})),c&&s.push({text:c,w:e.measureText(c).width,h:Number(e.font.match(/\d+px/)[0].replace("px",""))}),s}},r=n,a=e=>e.x,i=e=>e.x+e.w,c=e=>e.y,s=e=>e.y+e.h,h=e=>Object({...e,l:a(e),r:i(e),t:c(e),b:s(e)}),l=e=>e.x+e.w/2,u=e=>e.y+e.h/2,d=e=>e.x,p=e=>e.y,f=e=>e.x,v=e=>e.y+e.h,y=e=>e.x+e.w,m=e=>e.y,x=e=>e.x+e.w,w=e=>e.y+e.h,g=e=>Object({...e,cx:l(e),cy:u(e),ltx:d(e),lty:p(e),lbx:f(e),lby:v(e),rtx:y(e),rty:m(e),rbx:x(e),rby:w(e)}),E=e=>.01*Math.min(e.w,e.h),b=e=>.01*Math.max(e.w,e.h),C=e=>.01*e.w,k=e=>.01*e.h,A=e=>Object({...e,vmin:E(e),vmax:b(e),vw:C(e),vh:k(e)}),M=e=>Object({...e,x:e.cx-e.w/2,y:e.cy-e.h/2}),P=e=>Object({x:e.x,y:e.y,w:e.w,h:e.h,...h(e),...g(e),...A(e)}),T={l:a,r:i,t:c,b:s,wireframe:h,cx:l,cy:u,ltx:d,lty:p,lbx:f,lby:v,rtx:y,rty:m,rbx:x,rby:w,point:g,vmin:E,vmax:b,vw:C,vh:k,viewport:A,fromcenter:M,coordinate:P,coordinatefromcenter:e=>P(M(e))},L={add:e=>e.reduce(((e,t)=>Object({x:e.x+(t.x||0),y:e.y+(t.y||0),w:e.w+(t.w||0),h:e.h+(t.h||0)})),{x:0,y:0,w:0,h:0}),box:e=>e.reduce(((e,t)=>Object({x:t.x?Math.min(e.x,t.x):e.x,y:t.y?Math.min(e.y,t.y):e.y,w:t.x&&t.w?Math.max(e.w,t.x+t.w):e.w,h:t.y&&t.h?Math.max(e.h,t.y+t.h):e.h})),{x:0,y:0,w:0,h:0}),wmin:e=>e.reduce(((e,t)=>t.w?Math.min(t.w,e):e),0),wmax:e=>e.reduce(((e,t)=>t.w?Math.max(t.w,e):e),0),hmin:e=>e.reduce(((e,t)=>t.h?Math.min(t.h,e):e),0),hmax:e=>e.reduce(((e,t)=>t.h?Math.max(t.h,e):e),0)},X=L,R=(e,t)=>{var o=0,n=!1,r=[];return t.forEach((t=>{!1===n&&(o+t.w<e.w||o+t.w===e.w)&&r.push(t),!1===n&&(o+t.w<e.w||o+t.w===e.w)&&(o+=t.w),o+t.w>e.w&&(n=!0)})),{result:r,rest:t.filter(((e,t)=>t>r.length-1))}},S=e=>{const t=[];if("function"==typeof e.tag&&e.tag({...e,layoutProcess:void 0,preprocess:void 0,postprocess:void 0}),"string"==typeof e.tag&&"layout"===e.tag&&e.component&&e.component({...e,layoutProcess:void 0,preprocess:void 0,postprocess:void 0}),e.children){const o=e.children.map((t=>"function"==typeof t?t(e.position):t));o.filter((e=>"function"==typeof e.position)).forEach((t=>t.position=t.position(e.position))),o.filter((e=>e.preprocess)).forEach((t=>t.preprocess.forEach((t=>t(e.position,o.map((e=>e.position)),t.position))))),e.layoutProcess&&e.layoutProcess.forEach((t=>t(e.position,o.map((e=>e.position))))),o.filter((e=>e.postprocess)).forEach((t=>t.postprocess.forEach((t=>t(e.position,o.map((e=>e.position)),t.position))))),o.forEach((e=>t.push(...S(e))))}return t.push({...e,layoutProcess:void 0,preprocess:void 0,postprocess:void 0}),t},I={horizontalForward:(e,t)=>{var o=0;return t.forEach((t=>{t.x=e.x+o,o+=t.w})),t},horizontalReverse:(e,t)=>{var o=0;return t.forEach((t=>{t.x=e.x+e.w-t.w-o,o+=t.w})),t},horizontalCenter:(e,t)=>{var o=0,n=X.add(t).w;return t.forEach((t=>{t.x=e.x+(e.w-n)/2+o,o+=t.w})),t},horizontalAround:(e,t)=>{var o=0,n=X.add(t).w;return t.forEach(((r,a)=>{r.x=e.x+(e.w-n)/(t.length-1)*a+o,o+=r.w})),t},horizontalBetween:(e,t)=>{var o=0,n=X.add(t).w;return t.forEach(((r,a)=>{r.x=e.x+(e.w-n)/(t.length+1)*(a+1)+o,o+=r.w})),t},horizontalAccommodate:R,horizontalInfinite:(e,t,o)=>{for(var n=[],r=t;r.length;){const t=R(e,r);n=[...n,o(e,t.result)],r=t.rest}return{result:n,rest:t.filter(((e,t)=>t<n.flat().length-1))}},horizontalAlignLeft:(e,t)=>(t.forEach(((t,o)=>{t.x=e.x})),t),horizontalAlignRight:(e,t)=>(t.forEach(((t,o)=>{t.x=e.x+e.w})),t),horizontalAlignCenter:(e,t)=>(t.forEach(((t,o)=>{t.x=e.x+(e.w-t.w)/2})),t),verticalForward:(e,t)=>{var o=0;return t.forEach((t=>{t.y=e.y+o,o+=t.h})),t},verticalReverse:(e,t)=>{var o=0;return t.forEach((t=>{t.y=e.y+e.h-t.h-o,o+=t.h})),t},verticalCenter:(e,t)=>{var o=0,n=X.add(t).h;return t.forEach((t=>{t.y=e.y+(e.h-n)/2+o,o+=t.h})),t},verticalAround:(e,t)=>{var o=0,n=X.add(t).h;return t.forEach(((r,a)=>{r.y=e.y+(e.h-n)/(t.length-1)*a+o,o+=r.h})),t},verticalBetween:(e,t)=>{var o=0,n=X.add(t).h;return t.forEach(((r,a)=>{r.y=e.y+(e.h-n)/(t.length+1)*(a+1)+o,o+=r.h})),t},verticalAccommodate:(e,t)=>{var o=0,n=!1,r=[];return t.forEach((t=>{!1===n&&(o+t.h<e.h||o+t.h===e.h)&&r.push(t),!1===n&&(o+t.h<e.h||o+t.h===e.h)&&(o+=t.h),o+t.y>e.h&&(n=!0)})),{result:r,rest:t.filter(((e,t)=>t>r.length-1))}},verticalInfinite:(e,t,o)=>{for(var n=[],r=t;r.length;)n=[...n,o(e,r).result],r=o(e,r).rest;return{result:n,rest:t.filter(((e,t)=>t<n.flat().length-1))}},verticalAlignLeft:(e,t)=>(t.forEach(((t,o)=>{t.y=e.y})),t),verticalAlignCenter:(e,t)=>(t.forEach(((t,o)=>{t.y=e.y+(e.h-t.h)/2})),t),verticalAlignRight:(e,t)=>(t.forEach(((t,o)=>{t.y=e.y+e.h})),t),layout:S,layoutReactBabelCreateElement:(e,t,...o)=>({...t,tag:e,children:o.filter((e=>e)).flat()}),layoutProcessCopy:e=>(t,o)=>o.forEach((o=>e.forEach((e=>o[e]=t[e])))),layoutProcessCoordinate:(e,t)=>t.forEach((e=>Object.assign(e,T.coordinate(e))))},Y={pointcover:(e,t)=>t.x>=e.x&&t.x<=e.x+e.w&&t.y>=e.y&&t.y<=e.y+e.h};var O=[],j=[],F=0,z=0,B={alternate:"root",children:[]},D=!1,q=!1,N=[],U=void 0,H=0,W=[],_=void 0,G=[];const J=e=>{e.hooks.filter((e=>e.type===ee&&e.effectPrevious&&"function"==typeof e.effectPrevious)).forEach((e=>N.push((()=>e.effectPrevious())))),e.hooks.filter((e=>e.type===te&&e.effectPrevious&&"function"==typeof e.effectPrevious)).forEach((e=>e.effectPrevious())),e.children.forEach((e=>J(e)))},K=e=>{U.children[H]=e,U=e,H=0,j.push(0),W.push({hooks:e.hooks,index:0}),_=W[W.length-1]},Q=e=>{e.children.filter(((e,t)=>t>H||t===H)).forEach((e=>J(e))),e.children=e.children.filter(((e,t)=>t<H)),U=e.parent,H=U.children.findIndex((t=>t===e))+1,O=O.filter(((e,t)=>t<O.length-j[j.length-1])),j=j.filter(((e,t)=>t<j.length-1)),W=W.filter(((e,t)=>t<W.length-1)),_=W[W.length-1]},V=()=>{for(D=!0,F=performance.now(),U=B,H=0,G.forEach((e=>e()));0!==N.length;)N.shift()();const e=()=>{requestAnimationFrame((()=>{const t=performance.now();t-F<z&&e(),(t-F>z||t-F===z)&&(D=!1),(t-F>z||t-F===z)&&V()}))};q&&e(),!1===q&&(D=!1),q=!1},Z=e=>{var t;return void 0===t&&(t=_.hooks[_.index]),void 0===t&&(t={state:e}),_.hooks[_.index]=t,[t.state,e=>{"function"==typeof e&&(t.state=e(t.state)),"function"!=typeof e&&(t.state=e),!0===D&&(q=!0),!1===D&&requestAnimationFrame(V)}]},$=e=>{var t;return void 0===t&&(t=_.hooks[_.index]),void 0===t&&(t={current:e}),_.hooks[_.index]=t,t},ee=(e,t)=>{var o;void 0===o&&(o=_.hooks[_.index]),void 0===o&&(o={effect:e}),_.hooks[_.index]=o,(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&N.push((()=>o.effectPrevious=o.effectPrevious&&"function"==typeof o.effectPrevious?o.effectPrevious():void 0)),(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&N.push((()=>o.effectPrevious=e())),o.dependence=t},te=(e,t)=>{var o;void 0===o&&(o=_.hooks[_.index]),void 0===o&&(o={effect:e}),_.hooks[_.index]=o,(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&(o.effectPrevious=o.effectPrevious&&"function"==typeof o.effectPrevious?o.effectPrevious():void 0),(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&(o.effectPrevious=e()),o.dependence=t},oe=(e,t)=>{var o;return void 0===o&&(o=_.hooks[_.index]),void 0===o&&(o={memo:e}),_.hooks[_.index]=o,(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&(o.memo=e()),o.dependence=t,o.memo},ne=(e,t)=>{var o;return void 0===o&&(o=_.hooks[_.index]),void 0===o&&(o={callback:e}),_.hooks[_.index]=o,(void 0===o.dependence||o.dependence.some(((e,o)=>e!==t[o])))&&(o.callback=e),o.dependence=t,o.callback},re={mount:(e,t)=>(G.push(e),z=t,re),render:V,componentRunBefore:K,componentRunAfter:Q,compoment:(e,t,o)=>{var n,r=Object(t).key,a=Object(t).ref,i=U.children.findIndex((t=>void 0!==t.key&&t.key===r&&t.alternate===e));-1!==i&&U.children.splice(H,0,U.children.splice(i,1)[0]),void 0===n&&U.children[H]&&U.children[H].alternate===e&&U.children[H].key===r&&(n=U.children[H]),void 0===n&&(n={key:r,alternate:e,children:[],hooks:[],props:t}),n!==U.children[H]&&U.children[H]&&J(U.children[H]),n.parent=U,K(n),"function"==typeof a&&a(n);const c=n.alternate(t);return"function"==typeof o&&o(c),Q(n),c},createElement:(e,t,...o)=>({alternate:e,props:t,children:o}),Fragment:()=>{},contextProvider:e=>{O.push(e),j[j.length-1]=j[j.length-1]+1},contextProviderExtend:e=>{O.push({...O[O.length-1],...e}),j[j.length-1]=j[j.length-1]+1},shouldRender:()=>{!0===D&&(q=!0),!1===D&&requestAnimationFrame(V)},useContext:()=>O[O.length-1],useState:Z,useRef:$,useEffect:ee,useEffectImmediate:te,useMemo:oe,useCallback:ne};Object.keys(re).filter((e=>[Z,$,ee,te,oe,ne].includes(re[e]))).forEach((e=>{return re[e]=(t=re[e],(...e)=>{try{if(void 0!==_.hooks[_.index]&&_.hooks[_.index].type!==t)throw Error(t);return t(...e)}finally{_.hooks[_.index].type=t,_.index=_.index+1}});var t}));const ae=re,ie={useStateFlow:e=>{const t=ae.useRef([]);return{getState:e=>t.current[void 0===e?t.current.length-1:e],useState:e=>{ae.useEffectImmediate((()=>t.current=[...t.current,e]),[e]),ae.useEffectImmediate((()=>()=>t.current=t.current.filter((t=>t!==e))),[e])}}},useAnimationCount:e=>{const[t,o]=ae.useState(e.count),[n,r]=ae.useState(e.delay),[a,i]=ae.useState(e.flow);return ae.useEffect((()=>{0!==n&&r(n-1)})),ae.useEffect((()=>{!0===e.play&&0===n&&!0===e.reverse&&(t===e.min||t<e.min)&&i(0),!0===e.play&&0===n&&!0===e.reverse&&(t===e.max||t>e.max)&&i(1)})),ae.useEffect((()=>{!0===e.play&&0===n&&0===a&&t<e.max&&o(t+e.rate),!0===e.play&&0===n&&1===a&&t>e.min&&o(t-e.rate)})),{animationCount:t,setAnimationCount:o,animationDelay:n,setAnimationDelay:r,animationFlow:a,setAnimationFlow:i}},useImage:e=>{const t=ae.useMemo((()=>new Image),[]);return ae.useEffectImmediate((()=>t.src=e.src),[e.src]),ae.useEffectImmediate((()=>t.onload=()=>e.onload?e.onload():void 0),[e.onload]),{image:t}},useResourceReload:e=>{const[t,o]=ae.useState(0),[n,r]=ae.useState(!0);return ae.useEffectImmediate((()=>{o(0),r(!0),e.resource.forEach((e=>fetch(e).then((()=>o((e=>e+1))))))}),[...e.resource]),ae.useEffectImmediate((()=>r(t<e.resource.length)),[t]),{resourceCount:t,resourceLoading:n}}},ce=(e,t)=>{e.save&&Ce.context().save(),t(),e.globalAlpha&&(Ce.context().globalAlpha=e.globalAlpha),e.fillStyle&&(Ce.context().fillStyle=e.fillStyle),e.fill&&Ce.context().fill(),e.save&&Ce.context().restore()},se=e=>{ce(e,(()=>{r.drawRect(Ce.context(),{x:e.x,y:e.y,w:e.w,h:e.h})}))},he=e=>{ce(e,(()=>{r.drawArc(Ce.context(),{x:e.x,y:e.y,w:e.w,h:e.h},e.radius,e.sAngle,e.eAngle,e.counterclockwise)}))},le=e=>{ce(e,(()=>{!0!==Boolean(e.clipmin)&&!0===Boolean(e.clipmax)&&r.drawImageClipMaxCenter(Ce.context(),{x:e.x,y:e.y,w:e.w,h:e.h},e.image),!0===Boolean(e.clipmin)&&!0!==Boolean(e.clipmax)&&r.drawImageClipMinCenter(Ce.context(),{x:e.x,y:e.y,w:e.w,h:e.h},e.image),!0!==Boolean(e.clipmin)&&!0!==Boolean(e.clipmax)&&r.drawImage(Ce.context(),{x:e.x,y:e.y,w:e.w,h:e.h},e.image)}))},ue=e=>"rect"===e?se:"arc"===e?he:"image"===e?le:void 0;var de=[];const pe=(e,t)=>{de=[...de,{type:e,callback:t}]},fe=(e,t)=>{de=de.filter((o=>o.type!==e||o.callback!==t))},ve={addEventListener:pe,removeEventListener:fe,clearEventListener:()=>{de=[]},useEventListener:(e,t)=>{ae.useEffectImmediate((()=>pe(e,t)),[e,t]),ae.useEffectImmediate((()=>()=>fe(e,t)),[e,t])},addEventListenerWithCanvas:e=>{new Array("click","touchstart","touchmove","touchend","mousedown","mousemove","mouseup").forEach((t=>{e.addEventListener(t,(e=>((e,t)=>{const o=de.filter((e=>e.type===t)).sort(((e,t)=>{const o=void 0===e.option||void 0===e.option.priority?0:e.option.priority;return(void 0===t.option||void 0===t.option.priority?0:t.option.priority)-o}));var n=!1;o.forEach((t=>{var o,r;void 0===window.ontouchstart&&(o=e.pageX),void 0===window.ontouchstart&&(r=e.pageY),void 0!==window.ontouchstart&&(o=e.changedTouches[0].pageX),void 0!==window.ontouchstart&&(r=e.changedTouches[0].pageY),o*=Ce.dpr(),r*=Ce.dpr();const a={native:e,x:o,y:r,stopPropagation:()=>n=!0};!1===n&&t.callback(a)}))})(e,t)),{passive:!0})}))}},ye=ve,me=e=>{if(void 0===window.ontouchstart){var{onStart:t,onMove:o,onEnd:n}=(e=>{const t=ae.useRef(),o=ae.useRef(),n=ae.useCallback((t=>{e.onChange&&e.onChange(t)}),[e.onChange]);return{onStart:ae.useCallback((r=>{if(!1===e.enable)return;const a=r.pageX,i=r.pageY;t.current={x:a,y:i},o.current={x:a,y:i},n({type:"mouse",status:"afterStart",e:r,x:a,y:i,changedX:0,changedY:0,continuedX:0,continuedY:0})}),[e.enable,e.onChange]),onMove:ae.useCallback((r=>{if(!1===e.enable)return;if(void 0===o.current)return;const a=r.pageX,i=r.pageY,c=a-o.current.x,s=i-o.current.y,h=o.current.x-t.current.x,l=o.current.y-t.current.y;o.current={x:a,y:i},n({type:"mouse",status:"afterMove",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l})}),[e.enable,e.onChange]),onEnd:ae.useCallback((r=>{if(!1===e.enable)return;if(void 0===o.current)return;const a=r.pageX,i=r.pageY,c=a-o.current.x,s=i-o.current.y,h=o.current.x-t.current.x,l=o.current.y-t.current.y;n({type:"mouse",status:"beforeEnd",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l}),t.current=void 0,o.current=void 0,n({type:"mouse",status:"afterEnd",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l})}),[e.enable,e.onChange])}})({onChange:e.onChange,enable:e.enable});ye.useEventListener("mousedown",t,e.startOption),ye.useEventListener("mousemove",o,e.moveOption),ye.useEventListener("mouseup",n,e.endOption)}if(void 0!==window.ontouchstart){var{onStart:t,onMove:o,onEnd:n}=(e=>{const t=ae.useRef(),o=ae.useRef(),n=ae.useCallback((t=>{e.onChange&&e.onChange(t),e.onChangeMemo&&e.onChangeMemo(t)}),[e.onChange]);return{onStart:ae.useCallback((r=>{if(!1===e.enable)return;const a=[...r.changedTouches].map((e=>e.pageX)),i=[...r.changedTouches].map((e=>e.pageY));t.current={x:a,y:i},o.current={x:a,y:i};const c=[],s=[],h=[],l=[];a.forEach(((e,t)=>{c[t]=0,h[t]=0})),i.forEach(((e,t)=>{s[t]=0,l[t]=0})),n({type:"touch",status:"afterStart",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l})}),[e.enable,e.onChange]),onMove:ae.useCallback((r=>{if(!1===e.enable)return;if(void 0===o.current)return;const a=[...r.changedTouches].map((e=>e.pageX)),i=[...r.changedTouches].map((e=>e.pageY)),c=[],s=[],h=[],l=[];a.forEach(((e,n)=>{c[n]=e-o.current.x[n],h[n]=o.current.x[n]-t.current.x[n]})),i.forEach(((e,n)=>{s[n]=e-o.current.y[n],l[n]=o.current.y[n]-t.current.y[n]})),o.current={x:a,y:i},n({type:"touch",status:"afterMove",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l})}),[e.enable,e.onChange]),onEnd:ae.useCallback((r=>{if(!1===e.enable)return;if(void 0===o.current)return;const a=[...r.changedTouches].map((e=>e.pageX)),i=[...r.changedTouches].map((e=>e.pageY)),c=[],s=[],h=[],l=[];a.forEach(((e,n)=>{c[n]=e-o.current.x[n],h[n]=o.current.x[n]-t.current.x[n]})),i.forEach(((e,n)=>{s[n]=e-o.current.y[n],l[n]=o.current.y[n]-t.current.y[n]})),n({type:"touch",status:"beforeEnd",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l}),t.current=void 0,o.current=void 0,n({type:"touch",status:"afterEnd",e:r,x:a,y:i,changedX:c,changedY:s,continuedX:h,continuedY:l})}),[e.enable,e.onChange])}})({onChange:e.onChange,enable:e.enable});ye.useEventListener("touchstart",t,e.startOption),ye.useEventListener("touchmove",o,e.moveOption),ye.useEventListener("touchend",n,e.endOption)}};var xe,we,ge,Ee;const be=e=>{if(e&&"object"==typeof e){if(!0===Array.isArray(e)&&e.forEach((e=>be(e))),!1===Array.isArray(e)&&"function"==typeof e.alternate&&ae.compoment(e.alternate,e.props,(e=>be(e))),!1===Array.isArray(e)&&"string"==typeof e.alternate){const t=t=>{e.props&&"function"==typeof e.props.onClick&&ye.useEventListener("click",e.props.onClick),e.props&&"function"==typeof e.props.onTouchStart&&ye.useEventListener("touchstart",e.props.onTouchStart),e.props&&"function"==typeof e.props.onTouchMove&&ye.useEventListener("touchmove",e.props.onTouchMove),e.props&&"function"==typeof e.props.onTouchEnd&&ye.useEventListener("touchend",e.props.onTouchEnd),e.props&&"function"==typeof e.props.onMouseUp&&ye.useEventListener("mousedown",e.props.onMouseUp),e.props&&"function"==typeof e.props.onMouseMove&&ye.useEventListener("mousemove",e.props.onMouseMove),e.props&&"function"==typeof e.props.onMouseUp&&ye.useEventListener("mouseup",e.props.onMouseUp),e.props&&"object"==typeof e.props.onDrag&&me(e.props.onDrag),be(t)};ae.compoment(ue(e.alternate),e.props,t)}!1===Array.isArray(e)&&e.children&&e.children.forEach((e=>be(e)))}},Ce={dpr:()=>xe,canvas:()=>we,context:()=>ge,coordinate:()=>Ee,mount:(e,t)=>{const o=document.createElement("style");o.innerHTML=["::-webkit-scrollbar { width: 0; height: 0; }","body { padding: 0; margin: 0; }","body, body * { overscroll-behavior: none; }"].join(" "),document.head.appendChild(o),window.addEventListener("wheel",(e=>e.preventDefault()),{passive:!1}),window.addEventListener("touchmove",(e=>e.preventDefault()),{passive:!1}),window.addEventListener("contextmenu",(e=>e.preventDefault()),{passive:!1}),xe=2,we=document.createElement("canvas"),ge=we.getContext("2d");const n=()=>{we.width=window.innerWidth*xe,we.height=window.innerHeight*xe,we.style.width="100%",we.style.height="100%",Ee=T.coordinate({x:0,y:0,w:we.width,h:we.height})};return we.style.position="absolute",we.style.width="100%",we.style.height="100%",we.style.background="black",we.style.overflow="hidden",n(),window.addEventListener("resize",(()=>{n(),ae.shouldRender()})),document.body.appendChild(we),ye.addEventListenerWithCanvas(we),ae.mount((()=>{ge.clearRect(0,0,we.width,we.height),be(e)}),t.frameTimeDiffMax),{render:ae.render}}},ke={Caculate:o,Draw:r,Layout:I,Position:T,PositionBatch:X,PositionCover:Y,React:ae,ReactDomComponent:{CoordinateHelper:e=>new Array(Math.ceil(100*T.vmax(e.position)/e.gap/2)).fill().map(((t,o)=>0===o?ae.createElement(ae.Fragment,null,ae.createElement("rect",{save:!0,fill:!0,x:e.position.x,y:e.position.cy,w:100*T.vmax(e.position),h:.1*T.vmax(e.position),globalAlpha:.5,fillStyle:e.color}),ae.createElement("rect",{save:!0,fill:!0,x:e.position.cx,y:e.position.y,w:.1*T.vmax(e.position),h:100*T.vmax(e.position),globalAlpha:.5,fillStyle:e.color})):0!==o?ae.createElement(ae.Fragment,null,ae.createElement("rect",{save:!0,fill:!0,x:e.position.x,y:e.position.cy+e.gap*o,w:100*T.vmax(e.position),h:.1*T.vmax(e.position),globalAlpha:.25,fillStyle:e.color}),ae.createElement("rect",{save:!0,fill:!0,x:e.position.x,y:e.position.cy-e.gap*o,w:100*T.vmax(e.position),h:.1*T.vmax(e.position),globalAlpha:.25,fillStyle:e.color}),ae.createElement("rect",{save:!0,fill:!0,x:e.position.cx+e.gap*o,y:e.position.y,w:.1*T.vmax(e.position),h:100*T.vmax(e.position),globalAlpha:.25,fillStyle:e.color}),ae.createElement("rect",{save:!0,fill:!0,x:e.position.cx-e.gap*o,y:e.position.y,w:.1*T.vmax(e.position),h:100*T.vmax(e.position),globalAlpha:.25,fillStyle:e.color})):void 0))},ReactDom:Ce,ReactPlugin:ie};return t.default})()));